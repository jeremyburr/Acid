<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Acid</title>
  <link rel="shortcut icon" href="#">
  <style>
    body {
      margin: 0;
    }
  </style>
  <script type="module">
    import * as THREE from '../js/three.module.js';
    import { TrackballControls } from '../js/TrackballControls.js';
    import * as Axis from '../js/shapes/axis.js';
    import { unit, unit_0, unit_1, unit_2, unit_3, unit_4, tubeMaterial, returnEndPosition} from '../js/utilities.js'
    import { AcidCrystal} from '../js/AcidCrystal.js'

    let camera, scene, renderer, controls;
    let mesh0, mesh1, mesh2, mesh3, mesh4, mesh5, mesh6, mesh7;
    let coronalTubeTop, coronalTubeBottom, saggitalTubeFront, saggitalTubeBack;
    let coronalTopRight, coronalTopLeft, coronalTopBack, coronalTopFront;
    let coronalBottomRight, coronalBottomLeft, coronalBottomBack, coronalBottomFront;
    let saggitalBackTop, saggitalBackBottom, saggitalBackLeft, saggitalBackRight;
    let saggitalFrontTop, saggitalFrontBottom, saggitalFrontLeft, saggitalFrontRight;
    let unitLength = 8;

    init();
    animate();

    function init() {
      scene = new THREE.Scene();
      camera = new THREE.PerspectiveCamera(37, window.innerWidth / window.innerHeight, 1, 3500);
      camera.position.x = 0;
      //camera.position.y = 275;
      camera.position.y = 150;
      camera.position.z = 500;
      renderer = new THREE.WebGLRenderer({ antialias: true });
      renderer.setPixelRatio(window.devicePixelRatio);
      renderer.setSize(window.innerWidth, window.innerHeight);
      document.body.appendChild(renderer.domElement);
      controls = new TrackballControls(camera, renderer.domElement);
      window.addEventListener('resize', onWindowResize);

      // AC Levels: 1,2,3
      // Bond + Break
      // Skeleton vs 

      //const AC_OrgYPos = new AcidCrystal('center',40, 'pincer_short', [0,unitLength*8.5, 0], unitLength,2,'bond-break',[2,3]);

      const AC_Org = new AcidCrystal('center', 40, 'pincer_short', [0, 0, 0], unitLength,0,'bond-break',[2,3]);

      //const AC_OrgYPosDouble = new AcidCrystal('center',40, 'pincer_short', [0,unitLength*17, 0], unitLength,1);
      //const AC_OrgYNeg = new AcidCrystal('center',40, 'pincer_short', [0,-unitLength*8.5, 0], unitLength,3);
      //const AC_OrgYNegDouble = new AcidCrystal('center',40, 'pincer_short', [0,-unitLength*17, 0], unitLength,4);

      scene.add(unit_0);
      scene.add(unit);

     //scene.add(unit_2);



      //scene.add(unit_1);
      //scene.add(unit_3);
      //scene.add(unit_4);

      
      const axesHelper = new THREE.AxesHelper( 50 );
      //scene.add( axesHelper );

      scene.background = new THREE.Color(0x000000);

      const light0 = new THREE.DirectionalLight(0xfffffff, 1);
      light0.position.set(100, 100, 100)//.normalize();
      scene.add(light0);

      const light2 = new THREE.DirectionalLight(0xfffffff, 1);
      light2.position.set(-100, -100, -100)//.normalize();
      scene.add(light2);

      const light3 = new THREE.DirectionalLight(0xfffffff, 1);
      light3.position.set(100, -100, 100)//.normalize();
      scene.add(light3);

      const light4 = new THREE.DirectionalLight(0xfffffff, 1);
      light4.position.set(-100, 100, -100)//.normalize();
      scene.add(light4);

      const lightAmbient = new THREE.AmbientLight(0xffffff,1 ); // soft white light
      scene.add( lightAmbient );

    }

    function onWindowResize() {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    }

    function animate() {
      requestAnimationFrame(animate);
      controls.update();
      render();
      //stats.update();
    }

    /*unit.rotation.z -= .225;
    unit_0.rotation.z -= .225;
    unit_1.rotation.z -= .225;
    unit_2.rotation.z -= .225;
    unit_3.rotation.z -= .225;
    unit_4.rotation.z -= .225;*/
    //unit.rotation.y -= .3;
    //unit.rotation.x += .1;

    function render() {

      const time = Date.now() / 10000 * 3 

      //unit.rotation.x = time * .10;
      //unit.rotation.y = time * .25;

      unit_0.rotation.y = time * 1;
      unit_1.rotation.y = time * 1;
      unit_2.rotation.y = time * 1;
      unit_3.rotation.y = time * 1;
      unit_4.rotation.y = time * 1;

      //unit.rotation.z = time * .05;

      renderer.render(scene, camera);
    }
    

  </script>
</head>

<body>
  <div id="value"></div>
</body>

</html>

